# Test: advise output schema object/array + advisor mcp

spell TestAdviseSchemaObjectArray

  version: "1.0.0"
  description: "Advise output schema with object/array fields"

  assets: []

  advisors:
    analyst:
      model: "haiku"
      skills: ["web-search"]
      allowed_tools: ["web.run"]
      mcp: ["x-search"]

  on manual:
    report = advise analyst: "Provide a trade report"
      output:
        type: object
        fields:
          action:
            type: enum
            values: ["hold", "buy", "sell"]
          confidence:
            type: number
            min: 0
            max: 1
          notes:
            type: string
            min_length: 1
            max_length: 120
          legs:
            type: array
            items:
              type: object
              fields:
                asset: string
                amount: number
      timeout: 10
      fallback: { action: "hold", confidence: 0.5, notes: "fallback", legs: [{ asset: "ETH", amount: 1 }] }
    emit advised(report=report)
